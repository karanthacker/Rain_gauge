ORG 0000H
LCALL WAIT
LCALL WAIT
MOV A,#38H
LCALL COMMAND
LCALL WAIT
MOV A,#0EH
LCALL COMMAND
LCALL WAIT
MOV A,#06H
LCALL COMMAND
LCALL WAIT
MOV A,#82H
LCALL COMMAND
LCALL WAIT
MOV A,#0FFH
MOV P2,A // initiates P2 as sensor input 
MOV A,#00000000B
MAIN:
MOV A,P2 // moves the current status of P2 to A
CJNE A,#11110000B,LABEL1 // checks whether tank is full
MOV A,#82H
LCALL COMMAND
LCALL WAIT
MOV A,#'F'
LCALL DISPLAY
LCALL WAIT
MOV A,#'U'
LCALL DISPLAY
LCALL WAIT
MOV A,#'L'
LCALL DISPLAY
LCALL WAIT
MOV A,#'L'
LCALL DISPLAY
LCALL WAIT
setb p3.3
ljmp main
LABEL1:MOV A,P2  
CJNE A,#11111000B,LABEL2 // checks whether tank is 3/4
MOV A,#82H
LCALL COMMAND
LCALL WAIT
MOV A,#'T'
LCALL DISPLAY
LCALL WAIT
MOV A,#'H'
LCALL DISPLAY
LCALL WAIT
MOV A,#'R'
LCALL DISPLAY
LCALL WAIT
MOV A,#'E'
LCALL DISPLAY
LCALL WAIT
MOV A,#'E'
LCALL DISPLAY
LCALL WAIT
MOV A,#'F'
LCALL DISPLAY
LCALL WAIT
MOV A,#'O'
LCALL DISPLAY
LCALL WAIT
MOV A,#'U'
LCALL DISPLAY
LCALL WAIT
MOV A,#'R'
LCALL DISPLAY
LCALL WAIT
MOV A,#'T'
LCALL DISPLAY
LCALL WAIT
MOV A,#'H'
LCALL DISPLAY
LCALL WAIT
clr p3.3
ljmp main
LABEL2:MOV A,P2
CJNE A,#11111100B,LABEL3 // checks whether tank is 1/2
MOV A,#82H
LCALL COMMAND
LCALL WAIT
MOV A,#'H'
LCALL DISPLAY
LCALL WAIT
MOV A,#'A'
LCALL DISPLAY
LCALL WAIT
MOV A,#'L'
LCALL DISPLAY
LCALL WAIT
MOV A,#'F'
LCALL DISPLAY
LCALL WAIT
clr p3.3
ljmp main
LABEL3:MOV A,P2
CJNE A,#11111110B,LABEL4 // checks whether tank is 1/4
MOV A,#82H
LCALL COMMAND
LCALL WAIT
MOV A,#'Q'
LCALL DISPLAY
LCALL WAIT
MOV A,#'U'
LCALL DISPLAY
LCALL WAIT
MOV A,#'A'
LCALL DISPLAY
LCALL WAIT
MOV A,#'R'
LCALL DISPLAY
LCALL WAIT
MOV A,#'T'
LCALL DISPLAY
LCALL WAIT
MOV A,#'E'
LCALL DISPLAY
LCALL WAIT
MOV A,#'R'
LCALL DISPLAY
LCALL WAIT
clr p3.3
ljmp main
LABEL4:MOV A,P2
CJNE A,#11111111B,MAIN2 // checks whether tank is empty
MOV A,#82H
LCALL COMMAND
LCALL WAIT
MOV A,#'E'
LCALL DISPLAY
LCALL WAIT
MOV A,#'M'
LCALL DISPLAY
LCALL WAIT
MOV A,#'P'
LCALL DISPLAY
LCALL WAIT
MOV A,#'T'
LCALL DISPLAY
LCALL WAIT
MOV A,#'Y'
LCALL DISPLAY
LCALL WAIT
clr p3.3
ljmp main
MAIN2:LJMP MAIN
COMMAND:
MOV P1,A
CLR P3.0
CLR P3.1
SETB P3.2
LCALL WAIT
CLR P3.2
RET
DISPLAY:
MOV P1,A
SETB P3.0
CLR P3.1
SETB P3.2
LCALL WAIT
CLR p3.2
RET
WAIT:
mov r3,#250
here:	nop
	nop
	djnz r3,here
	RET


END




